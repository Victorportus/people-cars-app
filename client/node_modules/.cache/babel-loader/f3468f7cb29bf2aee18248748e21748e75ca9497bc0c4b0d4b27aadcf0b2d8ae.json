{"ast":null,"code":"var _jsxFileName = \"/Users/tito/Documents/Langara/4998 Advance topics develop/people-cars-app/client/src/components/CarForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useMutation, gql } from '@apollo/client';\nimport { Form, Input, Button, Select } from 'antd';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ADD_CAR = gql`\n  mutation AddCar($year: Int!, $make: String!, $model: String!, $price: Float!, $personId: ID!) {\n    addCar(year: $year, make: $make, model: $model, price: $price, personId: $personId) {\n      id\n      year\n      make\n      model\n      price\n      personId\n    }\n  }\n`;\nconst GET_PEOPLE = gql`\n  query GetPeople {\n    people {\n      id\n      firstName\n      lastName\n      cars {\n        id\n        year\n        make\n        model\n        price\n      }\n    }\n  }\n`;\nconst CarForm = ({\n  people\n}) => {\n  _s();\n  const [year, setYear] = useState('');\n  const [make, setMake] = useState('');\n  const [model, setModel] = useState('');\n  const [price, setPrice] = useState('');\n  const [personId, setPersonId] = useState('');\n  const [addCar] = useMutation(ADD_CAR, {\n    update(cache, {\n      data: {\n        addCar\n      }\n    }) {\n      const {\n        people\n      } = cache.readQuery({\n        query: GET_PEOPLE\n      });\n      const updatedPeople = people.map(person => person.id === addCar.personId ? {\n        ...person,\n        cars: [...person.cars, addCar]\n      } : person);\n      cache.writeQuery({\n        query: GET_PEOPLE,\n        data: {\n          people: updatedPeople\n        }\n      });\n    }\n  });\n  const handleSubmit = () => {\n    addCar({\n      variables: {\n        year: parseInt(year),\n        make,\n        model,\n        price: parseFloat(price),\n        personId\n      }\n    });\n    setYear('');\n    setMake('');\n    setModel('');\n    setPrice('');\n    setPersonId('');\n  };\n  return /*#__PURE__*/_jsxDEV(Form, {\n    layout: \"vertical\",\n    onFinish: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n      label: \"Year\",\n      required: true,\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        value: year,\n        onChange: e => setYear(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      label: \"Make\",\n      required: true,\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        value: make,\n        onChange: e => setMake(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      label: \"Model\",\n      required: true,\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        value: model,\n        onChange: e => setModel(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      label: \"Price\",\n      required: true,\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        value: price,\n        onChange: e => setPrice(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      label: \"Person\",\n      required: true,\n      children: /*#__PURE__*/_jsxDEV(Select, {\n        value: personId,\n        onChange: value => setPersonId(value),\n        placeholder: \"Select a person\",\n        children: people.map(person => /*#__PURE__*/_jsxDEV(Select.Option, {\n          value: person.id,\n          children: [person.firstName, \" \", person.lastName]\n        }, person.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        children: \"Add Car\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(CarForm, \"oE4iJorc8hCz4e22fXEb2LTqeJE=\", false, function () {\n  return [useMutation];\n});\n_c = CarForm;\nexport default CarForm;\nvar _c;\n$RefreshReg$(_c, \"CarForm\");","map":{"version":3,"names":["React","useState","useMutation","gql","Form","Input","Button","Select","jsxDEV","_jsxDEV","ADD_CAR","GET_PEOPLE","CarForm","people","_s","year","setYear","make","setMake","model","setModel","price","setPrice","personId","setPersonId","addCar","update","cache","data","readQuery","query","updatedPeople","map","person","id","cars","writeQuery","handleSubmit","variables","parseInt","parseFloat","layout","onFinish","children","Item","label","required","value","onChange","e","target","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","Option","firstName","lastName","type","htmlType","_c","$RefreshReg$"],"sources":["/Users/tito/Documents/Langara/4998 Advance topics develop/people-cars-app/client/src/components/CarForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useMutation, gql } from '@apollo/client';\nimport { Form, Input, Button, Select } from 'antd';\n\nconst ADD_CAR = gql`\n  mutation AddCar($year: Int!, $make: String!, $model: String!, $price: Float!, $personId: ID!) {\n    addCar(year: $year, make: $make, model: $model, price: $price, personId: $personId) {\n      id\n      year\n      make\n      model\n      price\n      personId\n    }\n  }\n`;\n\nconst GET_PEOPLE = gql`\n  query GetPeople {\n    people {\n      id\n      firstName\n      lastName\n      cars {\n        id\n        year\n        make\n        model\n        price\n      }\n    }\n  }\n`;\n\nconst CarForm = ({ people }) => {\n  const [year, setYear] = useState('');\n  const [make, setMake] = useState('');\n  const [model, setModel] = useState('');\n  const [price, setPrice] = useState('');\n  const [personId, setPersonId] = useState('');\n  const [addCar] = useMutation(ADD_CAR, {\n    update(cache, { data: { addCar } }) {\n      const { people } = cache.readQuery({ query: GET_PEOPLE });\n      const updatedPeople = people.map(person =>\n        person.id === addCar.personId\n          ? { ...person, cars: [...person.cars, addCar] }\n          : person\n      );\n      cache.writeQuery({\n        query: GET_PEOPLE,\n        data: { people: updatedPeople },\n      });\n    }\n  });\n\n  const handleSubmit = () => {\n    addCar({ variables: { year: parseInt(year), make, model, price: parseFloat(price), personId } });\n    setYear('');\n    setMake('');\n    setModel('');\n    setPrice('');\n    setPersonId('');\n  };\n\n  return (\n    <Form layout=\"vertical\" onFinish={handleSubmit}>\n      <Form.Item label=\"Year\" required>\n        <Input value={year} onChange={e => setYear(e.target.value)} />\n      </Form.Item>\n      <Form.Item label=\"Make\" required>\n        <Input value={make} onChange={e => setMake(e.target.value)} />\n      </Form.Item>\n      <Form.Item label=\"Model\" required>\n        <Input value={model} onChange={e => setModel(e.target.value)} />\n      </Form.Item>\n      <Form.Item label=\"Price\" required>\n        <Input value={price} onChange={e => setPrice(e.target.value)} />\n      </Form.Item>\n      <Form.Item label=\"Person\" required>\n        <Select value={personId} onChange={value => setPersonId(value)} placeholder=\"Select a person\">\n          {people.map(person => (\n            <Select.Option key={person.id} value={person.id}>\n              {person.firstName} {person.lastName}\n            </Select.Option>\n          ))}\n        </Select>\n      </Form.Item>\n      <Form.Item>\n        <Button type=\"primary\" htmlType=\"submit\">Add Car</Button>\n      </Form.Item>\n    </Form>\n  );\n};\n\nexport default CarForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}